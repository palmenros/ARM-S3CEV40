   1              	# 1 "../kernel/os_port/os_cpu_a.asm"
   1              	/*-----------------------------------------------------------------
   0              	
   0              	
   0              	
   2              	**
   3              	**  Fichero:
   4              	**    os_cpu_a.asm  20/1/2017
   5              	**
   6              	**    (c) J.M. Mendias
   7              	**    Programación de Sistemas y Dispositivos
   8              	**    Facultad de Informática. Universidad Complutense de Madrid
   9              	**
  10              	**  Propósito:
  11              	**    Portar el kernel de tiempo real uC/OS-II a la placa de prototipado
  12              	**    Embest S3CEV40, implementando las funciones:
  13              	**      - void OSStartHighRdy( void )
  14              	**      - void OSCtxSw( void )
  15              	**      - void OSIntCtxSw( void )
  16              	**      - void OSTickISR( void )
  17              	**
  18              	**  Notas de diseño:
  19              	**    - Implementado según las especificaciones del capítulo 13 del
  20              	**      libro "MicroC/OS-II. The Real-Time Kernel (2nd. edition)" 
  21              	**      de Jean J. Labrosse
  22              	**    - Asume que la fuente de interrupciones de tiempo es el timer0 y
  23              	**      que interrumpe por IRQ
  24              	**    - Asume que el kernel se ejecuta con repertorio ARM en modo SVC
  25              	**
  26              	**---------------------------------------------------------------*/
  27              	
  28              	#-----------------------------------------------------------------
  29              	#
  30              	#  Fichero:
  31              	#    s3c44b0x.asm  24/4/2013
  32              	#
  33              	#    (c) J.M. Mendias
  34              	#    Programación de Sistemas y Dispositivos
  35              	#    Facultad de Informática. Universidad Complutense de Madrid
  36              	#
  37              	#  Propósito:
  38              	#    Creación de nemotécnicos para los registros de los
  39              	#    controladores de dispositivos internos del chip S3C44BOX
  40              	#
  41              	#  Notas de diseño:
  42              	#    Las direcciones usadas asumen un alineamiento little-endian
  43              	#
  44              	#-----------------------------------------------------------------
  45              	
  46              	/* Controlador de memoria */
  47              	.equ BWSCON,    0x1c80000
  48              	.equ BANKCON0,  0x1c80004
  49              	.equ BANKCON1,  0x1c80008
  50              	.equ BANKCON2,  0x1c8000c
  51              	.equ BANKCON3,  0x1c80010
  52              	.equ BANKCON4,  0x1c80014
  53              	.equ BANKCON5,  0x1c80018
  54              	.equ BANKCON6,  0x1c8001c
  55              	.equ BANKCON7,  0x1c80020
  56              	.equ REFRESH,   0x1c80024
  57              	.equ BANKSIZE,  0x1c80028
  58              	.equ MRSRB6,    0x1c8002c
  59              	.equ MRSRB7,    0x1c80030
  60              	
  61              	/* Gestor de reloj y energía */
  62              	.equ PLLCON,    0x1d80000
  63              	.equ CLKCON,    0x1d80004
  64              	.equ CLKSLOW,   0x1d80008
  65              	.equ LOCKTIME,  0x1d8000c
  66              	
  67              	/* Controlador de cache */
  68              	.equ SYSCFG,    0x1c00000
  69              	.equ NCACHBE0,  0x1c00004
  70              	.equ NCACHBE1,  0x1c00008
  71              	
  72              	/* Árbitro de bus */
  73              	.equ SBUSCON,   0x1c40000
  74              	
  75              	/* Controlador de DMA */
  76              	.equ ZDCON0,    0x1e80000 /* canal ZDMA 0 */
  77              	.equ ZDISRC0,   0x1e80004
  78              	.equ ZDIDES0,   0x1e80008
  79              	.equ ZDICNT0,   0x1e8000c
  80              	.equ ZDCSRC0,   0x1e80010
  81              	.equ ZDCDES0,   0x1e80014
  82              	.equ ZDCCNT0,   0x1e80018
  83              	.equ ZDCON1,    0x1e80020 /* canal ZDMA 1 */
  84              	.equ ZDISRC1,   0x1e80024
  85              	.equ ZDIDES1,   0x1e80028
  86              	.equ ZDICNT1,   0x1e8002c
  87              	.equ ZDCSRC1,   0x1e80030
  88              	.equ ZDCDES1,   0x1e80034
  89              	.equ ZDCCNT1,   0x1e80038
  90              	.equ BDCON0,    0x1f80000 /* canal BDMA 0 */
  91              	.equ BDISRC0,   0x1f80004
  92              	.equ BDIDES0,   0x1f80008
  93              	.equ BDICNT0,   0x1f8000c
  94              	.equ BDCSRC0,   0x1f80010
  95              	.equ BDCDES0,   0x1f80014
  96              	.equ BDCCNT0,   0x1f80018
  97              	.equ BDCON1,    0x1f80020 /* canal BDMA 1 */
  98              	.equ BDISRC1,   0x1f80024
  99              	.equ BDIDES1,   0x1f80028
 100              	.equ BDICNT1,   0x1f8002c
 101              	.equ BDCSRC1,   0x1f80030
 102              	.equ BDCDES1,   0x1f80034
 103              	.equ BDCCNT1,   0x1f80038
 104              	
 105              	/* Controlador de puertos de E/S */
 106              	.equ SPUCR,     0x1d2004c
 107              	.equ PCONA,     0x1d20000 /* puerto A */
 108              	.equ PDATA,     0x1d20004
 109              	.equ PCONB,     0x1d20008 /* puerto B */
 110              	.equ PDATB,     0x1d2000c
 111              	.equ PCONC,     0x1d20010 /* puerto C */
 112              	.equ PDATC,     0x1d20014
 113              	.equ PUPC,      0x1d20018
 114              	.equ PCOND,     0x1d2001c /* puerto D */
 115              	.equ PDATD,     0x1d20020
 116              	.equ PUPD,      0x1d20024
 117              	.equ PCONE,     0x1d20028 /* puerto E */
 118              	.equ PDATE,     0x1d2002c
 119              	.equ PUPE,      0x1d20030
 120              	.equ PCONF,     0x1d20034 /* puerto F */
 121              	.equ PDATF,     0x1d20038
 122              	.equ PUPF,      0x1d2003c
 123              	.equ PCONG,     0x1d20040 /* puerto G */
 124              	.equ PDATG,     0x1d20044
 125              	.equ PUPG,      0x1d20048
 126              	.equ EXTINT,    0x1d20050
 127              	.equ EXTINTPND, 0x1d20054
 128              	
 129              	/* Bits de EXTINTPND */
 130              	.equ BIT_EINT4,  (1<<0)
 131              	.equ BIT_EINT5,  (1<<1)
 132              	.equ BIT_EINT6,  (1<<2)
 133              	.equ BIT_EINT7,  (1<<3)
 134              	
 135              	/* Temporizadores */
 136              	.equ TCFG0,     0x1d50000
 137              	.equ TCFG1,     0x1d50004
 138              	.equ TCON,      0x1d50008
 139              	.equ TCNTB0,    0x1d5000c /* temporizador 0 */
 140              	.equ TCMPB0,    0x1d50010
 141              	.equ TCNTO0,    0x1d50014
 142              	.equ TCNTB1,    0x1d50018 /* temporizador 1 */
 143              	.equ TCMPB1,    0x1d5001c
 144              	.equ TCNTO1,    0x1d50020
 145              	.equ TCNTB2,    0x1d50024 /* temporizador 2 */
 146              	.equ TCMPB2,    0x1d50028
 147              	.equ TCNTO2,    0x1d5002c
 148              	.equ TCNTB3,    0x1d50030 /* temporizador 3 */
 149              	.equ TCMPB3,    0x1d50034
 150              	.equ TCNTO3,    0x1d50038
 151              	.equ TCNTB4,    0x1d5003c /* temporizador 4 */
 152              	.equ TCMPB4,    0x1d50040
 153              	.equ TCNTO4,    0x1d50044
 154              	.equ TCNTB5,    0x1d50048 /* temporizador 5 */
 155              	.equ TCNTO5,    0x1d5004c
 156              	
 157              	/* UART */
 158              	.equ ULCON0,    0x1d00000 /* canal 0 */
 159              	.equ UCON0,     0x1d00004
 160              	.equ UFCON0,    0x1d00008
 161              	.equ UMCON0,    0x1d0000c
 162              	.equ UTRSTAT0,  0x1d00010
 163              	.equ UERSTAT0,  0x1d00014
 164              	.equ UFSTAT0,   0x1d00018
 165              	.equ UMSTAT0,   0x1d0001c
 166              	.equ UTXH0,     0x1d00020
 167              	.equ URXH0,     0x1d00024
 168              	.equ UBRDIV0,   0x1d00028
 169              	.equ ULCON1,    0x1d04000 /* canal 1 */
 170              	.equ UCON1,     0x1d04004
 171              	.equ UFCON1,    0x1d04008
 172              	.equ UMCON1,    0x1d0400c
 173              	.equ UTRSTAT1,  0x1d04010
 174              	.equ UERSTAT1,  0x1d04014
 175              	.equ UFSTAT1,   0x1d04018
 176              	.equ UMSTAT1,   0x1d0401c
 177              	.equ UTXH1,     0x1d04020
 178              	.equ URXH1,     0x1d04024
 179              	.equ UBRDIV1,   0x1d04028
 180              	
 181              	/* Controlador de interrupciones */
 182              	.equ INTCON,    0x1e00000
 183              	.equ INTPND,    0x1e00004
 184              	.equ INTMOD,    0x1e00008
 185              	.equ INTMSK,    0x1e0000c
 186              	.equ I_PSLV,    0x1e00010
 187              	.equ I_PMST,    0x1e00014
 188              	.equ I_CSLV,    0x1e00018
 189              	.equ I_CMST,    0x1e0001c
 190              	.equ I_ISPR,    0x1e00020
 191              	.equ I_ISPC,    0x1e00024
 192              	.equ F_ISPC,    0x1e0003c
 193              	
 194              	/* Bits de INTMASK, I_ISPC/F_ISPC y I_ISPR */
 195              	.equ BIT_ADC,    (1<<0)
 196              	.equ BIT_RTC,    (1<<1)
 197              	.equ BIT_UTXD1,  (1<<2)
 198              	.equ BIT_UTXD0,  (1<<3)
 199              	.equ BIT_SIO,    (1<<4)
 200              	.equ BIT_IIC,    (1<<5)
 201              	.equ BIT_URXD1,  (1<<6)
 202              	.equ BIT_URXD0,  (1<<7)
 203              	.equ BIT_TIMER5, (1<<8)
 204              	.equ BIT_TIMER4, (1<<9)
 205              	.equ BIT_TIMER3, (1<<10)
 206              	.equ BIT_TIMER2, (1<<11)
 207              	.equ BIT_TIMER1, (1<<12)
 208              	.equ BIT_TIMER0, (1<<13)
 209              	.equ BIT_UERR01, (1<<14)
 210              	.equ BIT_WDT,    (1<<15)
 211              	.equ BIT_BDMA1,  (1<<16)
 212              	.equ BIT_BDMA0,  (1<<17)
 213              	.equ BIT_ZDMA1,  (1<<18)
 214              	.equ BIT_ZDMA0,  (1<<19)
 215              	.equ BIT_TICK,   (1<<20)
 216              	.equ BIT_EINT4567, (1<<21)
 217              	.equ BIT_EINT3,  (1<<22)
 218              	.equ BIT_EINT2,  (1<<23)
 219              	.equ BIT_EINT1,  (1<<24)
 220              	.equ BIT_EINT0,  (1<<25)
 221              	.equ BIT_GLOBAL, (1<<26)
 222              	
 223              	/* Controlador de LCD */
 224              	.equ LCDCON1,   0x1f00000
 225              	.equ LCDCON2,   0x1f00004
 226              	.equ LCDCON3,   0x1f00040
 227              	.equ LCDSADDR1, 0x1f00008
 228              	.equ LCDSADDR2, 0x1f0000c
 229              	.equ LCDSADDR3, 0x1f00010
 230              	.equ REDLUT,    0x1f00014
 231              	.equ GREENLUT,  0x1f00018
 232              	.equ BLUELUT,   0x1f0001c
 233              	.equ DP1_2,     0x1f00020
 234              	.equ DP4_7,     0x1f00024
 235              	.equ DP3_5,     0x1f00028
 236              	.equ DP2_3,     0x1f0002c
 237              	.equ DP5_7,     0x1f00030
 238              	.equ DP3_4,     0x1f00034
 239              	.equ DP4_5,     0x1f00038
 240              	.equ DP6_7,     0x1f0003c
 241              	.equ DITHMODE,  0x1f00044
 242              	
 243              	/* Conversor analógico digital */
 244              	.equ ADCCON,    0x1d40000
 245              	.equ ADCPSR,    0x1d40004
 246              	.equ ADCDAT,    0x1d40008
 247              	
 248              	/* Reloj de tiempo real */
 249              	.equ RTCCON,    0x1d70040
 250              	.equ RTCALM,    0x1d70050
 251              	.equ ALMSEC,    0x1d70054
 252              	.equ ALMMIN,    0x1d70058
 253              	.equ ALMHOUR,   0x1d7005c
 254              	.equ ALMDAY,    0x1d70060
 255              	.equ ALMMON,    0x1d70064
 256              	.equ ALMYEAR,   0x1d70068
 257              	.equ RTCRST,    0x1d7006c
 258              	.equ BCDSEC,    0x1d70070
 259              	.equ BCDMIN,    0x1d70074
 260              	.equ BCDHOUR,   0x1d70078
 261              	.equ BCDDAY,    0x1d7007c
 262              	.equ BCDDATE,   0x1d70080
 263              	.equ BCDMON,    0x1d70084
 264              	.equ BCDYEAR,   0x1d70088
 265              	.equ TICNT,     0x1d7008c
 266              	
 267              	/* Watchdog timer */
 268              	.equ WTCON,     0x1d30000
 269              	.equ WTDAT,     0x1d30004
 270              	.equ WTCNT,     0x1d30008
 271              	
 272              	/* Controlador de IIC */
 273              	.equ IICCON,    0x1d60000
 274              	.equ IICSTAT,   0x1d60004
 275              	.equ IICADD,    0x1d60008
 276              	.equ IICDS,     0x1d6000c
 277              	
 278              	/* Controlador de IIS */
 279              	.equ IISCON,    0x1d18000
 280              	.equ IISMOD,    0x1d18004
 281              	.equ IISPSR,    0x1d18008
 282              	.equ IISFCON,   0x1d1800c
 283              	.equ IISFIF,    0x1d18010
 284              	
 285              	/* Controlador de SIO */
 286              	.equ SIOCON,    0x1d14000
 287              	.equ SIODAT,    0x1d14004
 288              	.equ SBRDR,     0x1d14008
 289              	.equ IVTCNT,    0x1d1400c
 290              	.equ DCNTZ,     0x1d14010
 291              	
 292              	/*-------------------------------------------------------------------
 293              	**
 294              	**  Fichero:
 295              	**    s3cev40.asm  24/4/2013
 296              	**
 297              	**    (c) J.M. Mendias
 298              	**    Programación de Sistemas y Dispositivos
 299              	**    Facultad de Informática. Universidad Complutense de Madrid
 300              	**
 301              	**  Propósito:
 302              	**    Creación de nemotécnicos para acceso a distintos elementos
 303              	**    de la placa de prototipado Embest S3CEV40
 304              	**
 305              	**  Notas de diseño:
 306              	**    Las direcciones usadas asumen un alineamiento little-endian
 307              	**
 308              	**-----------------------------------------------------------------*/
 309              	
 310              	/* Mapa de memoria */
 311              	
 312              	.equ ROM_START_ADDRESS, 0x00000000
 313              	.equ ROM_END_ADDRESS,   0x001fffff
 314              	
 315              	.equ DEVICES_START,     0x01c00000
 316              	.equ DEVICES_END,       0x0bffffff
 317              	
 318              	.equ RAM_START_ADDRESS, 0x0c000000
 319              	.equ RAM_END_ADDRESS,   0x0c7fffff
 320              	
 321              	.equ SP_START_ADDRESS,  0x10000000
 322              	.equ SP_END_ADDRESS,    0x100001ff
 323              	
 324              	.equ CACHE_LRU_START,   0x10004000
 325              	.equ CACHE_LRU_END,     0x100047ff
 326              	
 327              	/* Direcciones de las bases de las pilas del sistema */
 328              	
 329              	.equ USRSTACK,      0xc7ff000
 330              	.equ SVCSTACK,      0xc7ff100
 331              	.equ UNDSTACK,      0xc7ff200
 332              	.equ ABTSTACK,      0xc7ff300
 333              	.equ IRQSTACK,      0xc7ff400
 334              	.equ FIQSTACK,      0xc7ff500
 335              	
 336              	/* Tabla virtual de vectores de excepción */
 337              	
 338              	.equ pISR_RESET,    0xc7fff00
 339              	.equ pISR_UNDEF,    0xc7fff04
 340              	.equ pISR_SWI,      0xc7fff08
 341              	.equ pISR_PABORT,   0xc7fff0c
 342              	.equ pISR_DABORT,   0xc7fff10
 343              	/* Reservado */
 344              	.equ pISR_IRQ,      0xc7fff18
 345              	.equ pISR_FIQ,      0xc7fff1c
 346              	.equ pISR_ADC,      0xc7fff20
 347              	.equ pISR_RTC,      0xc7fff24
 348              	.equ pISR_UTXD1,    0xc7fff28
 349              	.equ pISR_UTXD0,    0xc7fff2c
 350              	.equ pISR_SIO,      0xc7fff30
 351              	.equ pISR_IIC,      0xc7fff34
 352              	.equ pISR_URXD1,    0xc7fff38
 353              	.equ pISR_URXD0,    0xc7fff3c
 354              	.equ pISR_TIMER5,   0xc7fff40
 355              	.equ pISR_TIMER4,   0xc7fff44
 356              	.equ pISR_TIMER3,   0xc7fff48
 357              	.equ pISR_TIMER2,   0xc7fff4c
 358              	.equ pISR_TIMER1,   0xc7fff50
 359              	.equ pISR_TIMER0,   0xc7fff54
 360              	.equ pISR_UERR01,   0xc7fff58
 361              	.equ pISR_WDT,      0xc7fff5c
 362              	.equ pISR_BDMA1,    0xc7fff60
 363              	.equ pISR_BDMA0,    0xc7fff64
 364              	.equ pISR_ZDMA1,    0xc7fff68
 365              	.equ pISR_ZDMA0,    0xc7fff6c
 366              	.equ pISR_TICK,     0xc7fff70
 367              	.equ pISR_PB,       0xc7fff74 /* EINT4567 */
 368              	.equ pISR_ETHERNET, 0xc7fff78 /* EINT3    */
 369              	.equ pISR_TS,       0xc7fff7c /* EINT2    */
 370              	.equ pISR_KEYPAD,   0xc7fff80 /* EINT1    */
 371              	.equ pISR_USB,      0xc7fff84 /* EINT0    */
 372              	
 373              	/* Bits de INTMASK, I_ISPC/F_ISPC y I_ISPR */
 374              	.equ BIT_PB,        (1<<21) /* EINT4567 */
 375              	.equ BIT_ETHERNET,  (1<<22) /* EINT3    */
 376              	.equ BIT_TS,        (1<<23) /* EINT2    */
 377              	.equ BIT_KEYPAD,    (1<<24) /* EINT1    */
 378              	.equ BIT_USB,       (1<<25) /* EINT0    */
 379              	
 380              	/* Bits de EXTINTPND */
 381              	.equ BIT_RIGHTPB,   (1<<3)
 382              	.equ BIT_LEFTPB,    (1<<2)
 383              	.equ BIT_IDE_INTRQ, (1<<1)
 384              	.equ BIT_IDE_DMACK, (1<<0)
 385              	
 386              	
 387              	  /* Referencias externas */
 388              	
 389              	  .extern OSRunning      /* BOOLEAN OSRunning         -- flag que indica si el kernel está en ejecu
 390              	  .extern OSIntNesting   /* INT8U OSIntNesting        -- nivel de anidación de interrupciones      
 391              	  .extern OSTaskSwHook   /* void OSTaskSwHook( void ) -- función definible por el usuario          
 392              	  .extern OSTCBCur       /* OS_TCB *OSTCBCur          -- puntero al TCB de la tarea en ejecución (a
 393              	  .extern OSPrioCuR      /* INT8U OSPrioCur           -- prioridad de la tarea en ejecución (a susp
 394              	  .extern OSTCBHighRdY   /* OS_TCB *OSTCBHighRdy      -- puntero al TCB de la tarea preparada de má
 395              	  .extern OSPrioHighRdy  /* INT8U OSPrioHighRdy       -- prioridad de la tarea preparada de máxima 
 396              	  .extern OSIntEnter     /* void OSIntEnter( void )   -- función del kernel                        
 397              	  .extern OSIntExit      /* void OSIntExit( void )    -- función del kernel                        
 398              	  .extern OSTimeTick     /* void OSTimeTick( void )   -- función del kernel                        
 399              	
 400              	  /* Funciones definidas en este módudo */
 401              	
 402              	  .global OSStartHighRdy /* void OSStartHighRdy( void ) */
 403              	  .global OSCtxSw        /* void OSCtxSw( void )        */
 404              	  .global OSIntCtxSw     /* void OSIntCtxS( void )      */
 405              	  .global OSTickISR      /* void OSTickISR( void )      */
 406              	
 407              	  /* Modos de operación */
 408              	
 409              	  .equ IRQMODE, (0x12)
 410              	  .equ SVCMODE, (0x13)
 411              	
 412              	  /* Máscara para desabilitar IRQ y FIQ */
 413              	
 414              	  .equ NOINT,   (0xc0)
 415              	
 416              	.section .text
 417              	
 418              	/*
 419              	** void OSStartHighRdy( void )
 420              	**
 421              	** Comienza la multitarea arrancando la tarea preparada con mayor prioridad.
 422              	** Esta función es llamada por OSStart().
 423              	**
 424              	*/
 425              	
 426              	OSStartHighRdy:  
 427              	  
 428 0000 FEFFFFEB 	  bl    OSTaskSwHook            /* (1) Llama a la función OSTaskSwHook() */
 429              	
 430 0004 E8409FE5 	  ldr   r4, =OSRunning          /* (2) OSRunning = TRUE                  */
 431 0008 0150A0E3 	  mov   r5, #1
 432 000c 0050C4E5 	  strb  r5, [r4]
 433              	
 434 0010 E0409FE5 	  ldr   r4, =OSTCBHighRdy       /* (3) SP = OSTCBHighRdy->OSTCBStkPtr    */
 435 0014 004094E5 	  ldr   r4, [r4]
 436 0018 00D094E5 	  ldr   sp, [r4]
 437              	
 438 001c 04409DE4 	  ldmfd sp!, {r4}               /* (4) Restaura de la pila el contexto de la tarea preparada con ma
 439 0020 04F069E1 	  msr   spsr, r4
 440 0024 FFDFFDE8 	  ldmfd sp!, {r0-r12,lr,pc}^    /* (5) ... retorna a dicha tarea (^ copia el SPSR al CPSR a la vez 
 441              	
 442              	/*
 443              	** void OSCtxSw( void )
 444              	**
 445              	** Conmuta (desde nivel tarea) de la tarea actual a la tarea preparada con mayor prioridad
 446              	** Esta función es llamada por OS_Sched() con las interrupciones desabilitadas.
 447              	**
 448              	** void OSIntCtxSw( void )
 449              	**
 450              	** Conmuta (desde nivel interrupción) de la tarea actual a la tarea preparada con mayor prioridad
 451              	** Su funcionalidad es equivalente a OSCtxSw pero sin guardar el contexto de la tarea actual (lo hi
 452              	** Esta función es llamada por OSIntExit() con las interrupciones desabilitadas.
 453              	**
 454              	*/
 455              	
 456              	OSCtxSw:
 457              	
 458 0028 04E02DE5 	  stmfd sp!, {lr}               /* (1) Guarda en la pila el contexto de la tarea actual */
 459 002c FF5F2DE9 	  stmfd sp!, {r0-r12, lr}
 460 0030 00400FE1 	  mrs   r4,  cpsr
 461 0034 04402DE5 	  stmfd sp!, {r4}
 462              	
 463 0038 BC409FE5 	  ldr r4, =OSTCBCur             /* (2) OSTCBCur->OSTCBStkPtr = SP        */
 464 003c 005094E5 	  ldr r5, [r4]
 465 0040 00D085E5 	  str sp, [r5]
 466              	
 467              	OSIntCtxSw:
 468              	
 469 0044 FEFFFFEB 	  bl OSTaskSwHook               /* (3) Llama a la función OSTaskSwHook() */
 470              	
 471 0048 AC409FE5 	  ldr r4, =OSTCBCur             /* (4) OSTCBCur = OSTCBHighRdy           */
 472 004c A4509FE5 	  ldr r5, =OSTCBHighRdy
 473 0050 005095E5 	  ldr r5, [r5]
 474 0054 005084E5 	  str r5, [r4]
 475              	
 476 0058 A0609FE5 	  ldr  r6, =OSPrioHighRdy       /* (5) OSPrioCur = OSPrioHighRdy         */
 477 005c A0709FE5 	  ldr  r7, =OSPrioCur
 478 0060 0060D6E5 	  ldrb r6, [r6]
 479 0064 0060C7E5 	  strb r6, [r7]
 480              	
 481 0068 00D095E5 	  ldr sp, [r5]                  /* (6) SP = OSTCBHighRdy->OSTCBStkPtr    */
 482              	
 483 006c 04409DE4 	  ldmfd sp!, {r4}               /* (7) Restaura de la pila el contexto de la tarea preparada con ma
 484 0070 04F069E1 	  msr   spsr, r4
 485 0074 FFDFFDE8 	  ldmfd sp!, {r0-r12,lr,pc}^    /* (8) ... retorna a dicha tarea         */
 486              	
 487              	
 488              	/*
 489              	** void OSTickISR( void )
 490              	**
 491              	** Rutina de tratamiento de la interrupción generada por el temporizador usado por el sistema para 
 492              	** de retardos y timeouts.
 493              	**
 494              	** IMPORTANTE: La rutina comienza su ejecución en modo IRQ (con SP, LR y CPSR propios)
 495              	**
 496              	*/
 497              	
 498              	OSTickISR:
 499              	
 500 0078 0E002DE9 	  stmfd sp!, {r1-r3}           /* Apila los registros de trabajo en la pila IRQ  */
 501              	
 502 007c 0D10A0E1 	  mov r1, sp                   /* Copia en R1 el puntero de la pila IRQ          */
 503 0080 0CD08DE2 	  add sp, sp, #12              /* Ajusta el puntero del la pila IRQ a la posición que tenía antes d
 504 0084 04204EE2 	  sub r2, lr, #4               /* Copia en R2, previo ajuste, la dirección de retorno a la tarea ac
 505 0088 00304FE1 	  mrs r3, spsr                 /* Copia en R3 el SPSR (i.e. el CPSR de la tarea actual interrumpida
 506              	
 507 008c D3F021E3 	  msr cpsr_c, #(NOINT|SVCMODE) /* Cambia a modo SVC */
 508              	
 509              	                               /* (1) Guarda en la pila SVC el contexto de la tarea actual         
 510 0090 04202DE5 	  stmfd sp!, {r2}              /*     - Apila la dirección de retorno a la tarea actual (previament
 511 0094 04E02DE5 	  stmfd sp!, {lr}              /*     - Apila el LR de la tarea actual                             
 512 0098 F01F2DE9 	  stmfd sp!, {r4-r12}          /*     - Apila los registros R4-R12 de la tarea actual              
 513 009c 7000B1E8 	  ldmfd r1!, {r4-r6}           /*     - Copia en R4-R6 los registros R1-R3 de la tarea actual (prev
 514 00a0 70002DE9 	  stmfd sp!, {r4-r6}           /*     - Apila los registros R1-R3 de la tarea actual (anteriormente
 515 00a4 04002DE5 	  stmfd sp!, {r0}              /*     - Apila el registro R0 de la tarea actual                    
 516 00a8 04302DE5 	  stmfd sp!, {r3}              /*     - Apila el CPSR de la tarea actual (previamente copiado en R3
 517              	
 518 00ac FEFFFFEB 	  bl  OSIntEnter               /* (2) Llama a la función OSIntEnter()          */
 519              	
 520 00b0 50009FE5 	  ldr  r0, =OSIntNesting       /* (3) Si OSIntNesting == 1 ...                 */
 521 00b4 0000D0E5 	  ldrb r0, [r0]
 522 00b8 010050E3 	  cmp  r0, #1
 523 00bc 0200001A 	  bne  OSTickISRcont
 524 00c0 34009FE5 	  ldr  r0, =OSTCBCur           /*     ... OSTCBCur->OSTCBStkPtr = SP           */
 525 00c4 001090E5 	  ldr  r1, [r0]
 526 00c8 00D081E5 	  str  sp, [r1]
 527              	
 528              	OSTickISRcont:
 529              	
 530 00cc D2F021E3 	  msr cpsr_c, #(NOINT|IRQMODE) /* Cambia a modo IRQ (para que la pila IRQ sea usada para tratar la 
 531 00d0 34109FE5 	  ldr r1, =I_ISPC              /* (4) Borra interrupción pendiente por timer */
 532 00d4 022AA0E3 	  mov r2, #BIT_TIMER0
 533 00d8 002081E5 	  str r2, [r1]
 534              	                               /* (5) Aquí opcionamente podrían habilitarse interrupciones */
 535              	
 536 00dc FEFFFFEB 	  bl  OSTimeTick               /* (6) Llama a la función OSTimeTick                        */
 537              	
 538 00e0 D3F021E3 	  msr cpsr_c, #(NOINT|SVCMODE) /* Cambia a modo SVC                            */
 539              	
 540 00e4 FEFFFFEB 	  bl  OSIntExit                /* (6) Llama a la función OSIntExit()           */
 541              	
 542              	                               /* Si ha vuelto de OSintExit() porque no hay una tarea preparada con
 543 00e8 04409DE4 	  ldmfd  sp!, {r4}             /* (7) Restaura de la pila el contexto de la tarea actual y ...     
 544 00ec 04F069E1 	  msr   spsr, r4
 545 00f0 FFDFFDE8 	  ldmfd  sp!, {r0-r12,lr,pc}^  /* (9) ... retorna a dicha tarea                */
 546              	
 547 00f4 00000000 	.end
 547      00000000 
 547      00000000 
 547      00000000 
 547      00000000 
DEFINED SYMBOLS
../kernel/os_port/os_cpu_a.asm:47     *ABS*:01c80000 BWSCON
../kernel/os_port/os_cpu_a.asm:48     *ABS*:01c80004 BANKCON0
../kernel/os_port/os_cpu_a.asm:49     *ABS*:01c80008 BANKCON1
../kernel/os_port/os_cpu_a.asm:50     *ABS*:01c8000c BANKCON2
../kernel/os_port/os_cpu_a.asm:51     *ABS*:01c80010 BANKCON3
../kernel/os_port/os_cpu_a.asm:52     *ABS*:01c80014 BANKCON4
../kernel/os_port/os_cpu_a.asm:53     *ABS*:01c80018 BANKCON5
../kernel/os_port/os_cpu_a.asm:54     *ABS*:01c8001c BANKCON6
../kernel/os_port/os_cpu_a.asm:55     *ABS*:01c80020 BANKCON7
../kernel/os_port/os_cpu_a.asm:56     *ABS*:01c80024 REFRESH
../kernel/os_port/os_cpu_a.asm:57     *ABS*:01c80028 BANKSIZE
../kernel/os_port/os_cpu_a.asm:58     *ABS*:01c8002c MRSRB6
../kernel/os_port/os_cpu_a.asm:59     *ABS*:01c80030 MRSRB7
../kernel/os_port/os_cpu_a.asm:62     *ABS*:01d80000 PLLCON
../kernel/os_port/os_cpu_a.asm:63     *ABS*:01d80004 CLKCON
../kernel/os_port/os_cpu_a.asm:64     *ABS*:01d80008 CLKSLOW
../kernel/os_port/os_cpu_a.asm:65     *ABS*:01d8000c LOCKTIME
../kernel/os_port/os_cpu_a.asm:68     *ABS*:01c00000 SYSCFG
../kernel/os_port/os_cpu_a.asm:69     *ABS*:01c00004 NCACHBE0
../kernel/os_port/os_cpu_a.asm:70     *ABS*:01c00008 NCACHBE1
../kernel/os_port/os_cpu_a.asm:73     *ABS*:01c40000 SBUSCON
../kernel/os_port/os_cpu_a.asm:76     *ABS*:01e80000 ZDCON0
../kernel/os_port/os_cpu_a.asm:77     *ABS*:01e80004 ZDISRC0
../kernel/os_port/os_cpu_a.asm:78     *ABS*:01e80008 ZDIDES0
../kernel/os_port/os_cpu_a.asm:79     *ABS*:01e8000c ZDICNT0
../kernel/os_port/os_cpu_a.asm:80     *ABS*:01e80010 ZDCSRC0
../kernel/os_port/os_cpu_a.asm:81     *ABS*:01e80014 ZDCDES0
../kernel/os_port/os_cpu_a.asm:82     *ABS*:01e80018 ZDCCNT0
../kernel/os_port/os_cpu_a.asm:83     *ABS*:01e80020 ZDCON1
../kernel/os_port/os_cpu_a.asm:84     *ABS*:01e80024 ZDISRC1
../kernel/os_port/os_cpu_a.asm:85     *ABS*:01e80028 ZDIDES1
../kernel/os_port/os_cpu_a.asm:86     *ABS*:01e8002c ZDICNT1
../kernel/os_port/os_cpu_a.asm:87     *ABS*:01e80030 ZDCSRC1
../kernel/os_port/os_cpu_a.asm:88     *ABS*:01e80034 ZDCDES1
../kernel/os_port/os_cpu_a.asm:89     *ABS*:01e80038 ZDCCNT1
../kernel/os_port/os_cpu_a.asm:90     *ABS*:01f80000 BDCON0
../kernel/os_port/os_cpu_a.asm:91     *ABS*:01f80004 BDISRC0
../kernel/os_port/os_cpu_a.asm:92     *ABS*:01f80008 BDIDES0
../kernel/os_port/os_cpu_a.asm:93     *ABS*:01f8000c BDICNT0
../kernel/os_port/os_cpu_a.asm:94     *ABS*:01f80010 BDCSRC0
../kernel/os_port/os_cpu_a.asm:95     *ABS*:01f80014 BDCDES0
../kernel/os_port/os_cpu_a.asm:96     *ABS*:01f80018 BDCCNT0
../kernel/os_port/os_cpu_a.asm:97     *ABS*:01f80020 BDCON1
../kernel/os_port/os_cpu_a.asm:98     *ABS*:01f80024 BDISRC1
../kernel/os_port/os_cpu_a.asm:99     *ABS*:01f80028 BDIDES1
../kernel/os_port/os_cpu_a.asm:100    *ABS*:01f8002c BDICNT1
../kernel/os_port/os_cpu_a.asm:101    *ABS*:01f80030 BDCSRC1
../kernel/os_port/os_cpu_a.asm:102    *ABS*:01f80034 BDCDES1
../kernel/os_port/os_cpu_a.asm:103    *ABS*:01f80038 BDCCNT1
../kernel/os_port/os_cpu_a.asm:106    *ABS*:01d2004c SPUCR
../kernel/os_port/os_cpu_a.asm:107    *ABS*:01d20000 PCONA
../kernel/os_port/os_cpu_a.asm:108    *ABS*:01d20004 PDATA
../kernel/os_port/os_cpu_a.asm:109    *ABS*:01d20008 PCONB
../kernel/os_port/os_cpu_a.asm:110    *ABS*:01d2000c PDATB
../kernel/os_port/os_cpu_a.asm:111    *ABS*:01d20010 PCONC
../kernel/os_port/os_cpu_a.asm:112    *ABS*:01d20014 PDATC
../kernel/os_port/os_cpu_a.asm:113    *ABS*:01d20018 PUPC
../kernel/os_port/os_cpu_a.asm:114    *ABS*:01d2001c PCOND
../kernel/os_port/os_cpu_a.asm:115    *ABS*:01d20020 PDATD
../kernel/os_port/os_cpu_a.asm:116    *ABS*:01d20024 PUPD
../kernel/os_port/os_cpu_a.asm:117    *ABS*:01d20028 PCONE
../kernel/os_port/os_cpu_a.asm:118    *ABS*:01d2002c PDATE
../kernel/os_port/os_cpu_a.asm:119    *ABS*:01d20030 PUPE
../kernel/os_port/os_cpu_a.asm:120    *ABS*:01d20034 PCONF
../kernel/os_port/os_cpu_a.asm:121    *ABS*:01d20038 PDATF
../kernel/os_port/os_cpu_a.asm:122    *ABS*:01d2003c PUPF
../kernel/os_port/os_cpu_a.asm:123    *ABS*:01d20040 PCONG
../kernel/os_port/os_cpu_a.asm:124    *ABS*:01d20044 PDATG
../kernel/os_port/os_cpu_a.asm:125    *ABS*:01d20048 PUPG
../kernel/os_port/os_cpu_a.asm:126    *ABS*:01d20050 EXTINT
../kernel/os_port/os_cpu_a.asm:127    *ABS*:01d20054 EXTINTPND
../kernel/os_port/os_cpu_a.asm:130    *ABS*:00000001 BIT_EINT4
../kernel/os_port/os_cpu_a.asm:131    *ABS*:00000002 BIT_EINT5
../kernel/os_port/os_cpu_a.asm:132    *ABS*:00000004 BIT_EINT6
../kernel/os_port/os_cpu_a.asm:133    *ABS*:00000008 BIT_EINT7
../kernel/os_port/os_cpu_a.asm:136    *ABS*:01d50000 TCFG0
../kernel/os_port/os_cpu_a.asm:137    *ABS*:01d50004 TCFG1
../kernel/os_port/os_cpu_a.asm:138    *ABS*:01d50008 TCON
../kernel/os_port/os_cpu_a.asm:139    *ABS*:01d5000c TCNTB0
../kernel/os_port/os_cpu_a.asm:140    *ABS*:01d50010 TCMPB0
../kernel/os_port/os_cpu_a.asm:141    *ABS*:01d50014 TCNTO0
../kernel/os_port/os_cpu_a.asm:142    *ABS*:01d50018 TCNTB1
../kernel/os_port/os_cpu_a.asm:143    *ABS*:01d5001c TCMPB1
../kernel/os_port/os_cpu_a.asm:144    *ABS*:01d50020 TCNTO1
../kernel/os_port/os_cpu_a.asm:145    *ABS*:01d50024 TCNTB2
../kernel/os_port/os_cpu_a.asm:146    *ABS*:01d50028 TCMPB2
../kernel/os_port/os_cpu_a.asm:147    *ABS*:01d5002c TCNTO2
../kernel/os_port/os_cpu_a.asm:148    *ABS*:01d50030 TCNTB3
../kernel/os_port/os_cpu_a.asm:149    *ABS*:01d50034 TCMPB3
../kernel/os_port/os_cpu_a.asm:150    *ABS*:01d50038 TCNTO3
../kernel/os_port/os_cpu_a.asm:151    *ABS*:01d5003c TCNTB4
../kernel/os_port/os_cpu_a.asm:152    *ABS*:01d50040 TCMPB4
../kernel/os_port/os_cpu_a.asm:153    *ABS*:01d50044 TCNTO4
../kernel/os_port/os_cpu_a.asm:154    *ABS*:01d50048 TCNTB5
../kernel/os_port/os_cpu_a.asm:155    *ABS*:01d5004c TCNTO5
../kernel/os_port/os_cpu_a.asm:158    *ABS*:01d00000 ULCON0
../kernel/os_port/os_cpu_a.asm:159    *ABS*:01d00004 UCON0
../kernel/os_port/os_cpu_a.asm:160    *ABS*:01d00008 UFCON0
../kernel/os_port/os_cpu_a.asm:161    *ABS*:01d0000c UMCON0
../kernel/os_port/os_cpu_a.asm:162    *ABS*:01d00010 UTRSTAT0
../kernel/os_port/os_cpu_a.asm:163    *ABS*:01d00014 UERSTAT0
../kernel/os_port/os_cpu_a.asm:164    *ABS*:01d00018 UFSTAT0
../kernel/os_port/os_cpu_a.asm:165    *ABS*:01d0001c UMSTAT0
../kernel/os_port/os_cpu_a.asm:166    *ABS*:01d00020 UTXH0
../kernel/os_port/os_cpu_a.asm:167    *ABS*:01d00024 URXH0
../kernel/os_port/os_cpu_a.asm:168    *ABS*:01d00028 UBRDIV0
../kernel/os_port/os_cpu_a.asm:169    *ABS*:01d04000 ULCON1
../kernel/os_port/os_cpu_a.asm:170    *ABS*:01d04004 UCON1
../kernel/os_port/os_cpu_a.asm:171    *ABS*:01d04008 UFCON1
../kernel/os_port/os_cpu_a.asm:172    *ABS*:01d0400c UMCON1
../kernel/os_port/os_cpu_a.asm:173    *ABS*:01d04010 UTRSTAT1
../kernel/os_port/os_cpu_a.asm:174    *ABS*:01d04014 UERSTAT1
../kernel/os_port/os_cpu_a.asm:175    *ABS*:01d04018 UFSTAT1
../kernel/os_port/os_cpu_a.asm:176    *ABS*:01d0401c UMSTAT1
../kernel/os_port/os_cpu_a.asm:177    *ABS*:01d04020 UTXH1
../kernel/os_port/os_cpu_a.asm:178    *ABS*:01d04024 URXH1
../kernel/os_port/os_cpu_a.asm:179    *ABS*:01d04028 UBRDIV1
../kernel/os_port/os_cpu_a.asm:182    *ABS*:01e00000 INTCON
../kernel/os_port/os_cpu_a.asm:183    *ABS*:01e00004 INTPND
../kernel/os_port/os_cpu_a.asm:184    *ABS*:01e00008 INTMOD
../kernel/os_port/os_cpu_a.asm:185    *ABS*:01e0000c INTMSK
../kernel/os_port/os_cpu_a.asm:186    *ABS*:01e00010 I_PSLV
../kernel/os_port/os_cpu_a.asm:187    *ABS*:01e00014 I_PMST
../kernel/os_port/os_cpu_a.asm:188    *ABS*:01e00018 I_CSLV
../kernel/os_port/os_cpu_a.asm:189    *ABS*:01e0001c I_CMST
../kernel/os_port/os_cpu_a.asm:190    *ABS*:01e00020 I_ISPR
../kernel/os_port/os_cpu_a.asm:191    *ABS*:01e00024 I_ISPC
../kernel/os_port/os_cpu_a.asm:192    *ABS*:01e0003c F_ISPC
../kernel/os_port/os_cpu_a.asm:195    *ABS*:00000001 BIT_ADC
../kernel/os_port/os_cpu_a.asm:196    *ABS*:00000002 BIT_RTC
../kernel/os_port/os_cpu_a.asm:197    *ABS*:00000004 BIT_UTXD1
../kernel/os_port/os_cpu_a.asm:198    *ABS*:00000008 BIT_UTXD0
../kernel/os_port/os_cpu_a.asm:199    *ABS*:00000010 BIT_SIO
../kernel/os_port/os_cpu_a.asm:200    *ABS*:00000020 BIT_IIC
../kernel/os_port/os_cpu_a.asm:201    *ABS*:00000040 BIT_URXD1
../kernel/os_port/os_cpu_a.asm:202    *ABS*:00000080 BIT_URXD0
../kernel/os_port/os_cpu_a.asm:203    *ABS*:00000100 BIT_TIMER5
../kernel/os_port/os_cpu_a.asm:204    *ABS*:00000200 BIT_TIMER4
../kernel/os_port/os_cpu_a.asm:205    *ABS*:00000400 BIT_TIMER3
../kernel/os_port/os_cpu_a.asm:206    *ABS*:00000800 BIT_TIMER2
../kernel/os_port/os_cpu_a.asm:207    *ABS*:00001000 BIT_TIMER1
../kernel/os_port/os_cpu_a.asm:208    *ABS*:00002000 BIT_TIMER0
../kernel/os_port/os_cpu_a.asm:209    *ABS*:00004000 BIT_UERR01
../kernel/os_port/os_cpu_a.asm:210    *ABS*:00008000 BIT_WDT
../kernel/os_port/os_cpu_a.asm:211    *ABS*:00010000 BIT_BDMA1
../kernel/os_port/os_cpu_a.asm:212    *ABS*:00020000 BIT_BDMA0
../kernel/os_port/os_cpu_a.asm:213    *ABS*:00040000 BIT_ZDMA1
../kernel/os_port/os_cpu_a.asm:214    *ABS*:00080000 BIT_ZDMA0
../kernel/os_port/os_cpu_a.asm:215    *ABS*:00100000 BIT_TICK
../kernel/os_port/os_cpu_a.asm:216    *ABS*:00200000 BIT_EINT4567
../kernel/os_port/os_cpu_a.asm:217    *ABS*:00400000 BIT_EINT3
../kernel/os_port/os_cpu_a.asm:218    *ABS*:00800000 BIT_EINT2
../kernel/os_port/os_cpu_a.asm:219    *ABS*:01000000 BIT_EINT1
../kernel/os_port/os_cpu_a.asm:220    *ABS*:02000000 BIT_EINT0
../kernel/os_port/os_cpu_a.asm:221    *ABS*:04000000 BIT_GLOBAL
../kernel/os_port/os_cpu_a.asm:224    *ABS*:01f00000 LCDCON1
../kernel/os_port/os_cpu_a.asm:225    *ABS*:01f00004 LCDCON2
../kernel/os_port/os_cpu_a.asm:226    *ABS*:01f00040 LCDCON3
../kernel/os_port/os_cpu_a.asm:227    *ABS*:01f00008 LCDSADDR1
../kernel/os_port/os_cpu_a.asm:228    *ABS*:01f0000c LCDSADDR2
../kernel/os_port/os_cpu_a.asm:229    *ABS*:01f00010 LCDSADDR3
../kernel/os_port/os_cpu_a.asm:230    *ABS*:01f00014 REDLUT
../kernel/os_port/os_cpu_a.asm:231    *ABS*:01f00018 GREENLUT
../kernel/os_port/os_cpu_a.asm:232    *ABS*:01f0001c BLUELUT
../kernel/os_port/os_cpu_a.asm:233    *ABS*:01f00020 DP1_2
../kernel/os_port/os_cpu_a.asm:234    *ABS*:01f00024 DP4_7
../kernel/os_port/os_cpu_a.asm:235    *ABS*:01f00028 DP3_5
../kernel/os_port/os_cpu_a.asm:236    *ABS*:01f0002c DP2_3
../kernel/os_port/os_cpu_a.asm:237    *ABS*:01f00030 DP5_7
../kernel/os_port/os_cpu_a.asm:238    *ABS*:01f00034 DP3_4
../kernel/os_port/os_cpu_a.asm:239    *ABS*:01f00038 DP4_5
../kernel/os_port/os_cpu_a.asm:240    *ABS*:01f0003c DP6_7
../kernel/os_port/os_cpu_a.asm:241    *ABS*:01f00044 DITHMODE
../kernel/os_port/os_cpu_a.asm:244    *ABS*:01d40000 ADCCON
../kernel/os_port/os_cpu_a.asm:245    *ABS*:01d40004 ADCPSR
../kernel/os_port/os_cpu_a.asm:246    *ABS*:01d40008 ADCDAT
../kernel/os_port/os_cpu_a.asm:249    *ABS*:01d70040 RTCCON
../kernel/os_port/os_cpu_a.asm:250    *ABS*:01d70050 RTCALM
../kernel/os_port/os_cpu_a.asm:251    *ABS*:01d70054 ALMSEC
../kernel/os_port/os_cpu_a.asm:252    *ABS*:01d70058 ALMMIN
../kernel/os_port/os_cpu_a.asm:253    *ABS*:01d7005c ALMHOUR
../kernel/os_port/os_cpu_a.asm:254    *ABS*:01d70060 ALMDAY
../kernel/os_port/os_cpu_a.asm:255    *ABS*:01d70064 ALMMON
../kernel/os_port/os_cpu_a.asm:256    *ABS*:01d70068 ALMYEAR
../kernel/os_port/os_cpu_a.asm:257    *ABS*:01d7006c RTCRST
../kernel/os_port/os_cpu_a.asm:258    *ABS*:01d70070 BCDSEC
../kernel/os_port/os_cpu_a.asm:259    *ABS*:01d70074 BCDMIN
../kernel/os_port/os_cpu_a.asm:260    *ABS*:01d70078 BCDHOUR
../kernel/os_port/os_cpu_a.asm:261    *ABS*:01d7007c BCDDAY
../kernel/os_port/os_cpu_a.asm:262    *ABS*:01d70080 BCDDATE
../kernel/os_port/os_cpu_a.asm:263    *ABS*:01d70084 BCDMON
../kernel/os_port/os_cpu_a.asm:264    *ABS*:01d70088 BCDYEAR
../kernel/os_port/os_cpu_a.asm:265    *ABS*:01d7008c TICNT
../kernel/os_port/os_cpu_a.asm:268    *ABS*:01d30000 WTCON
../kernel/os_port/os_cpu_a.asm:269    *ABS*:01d30004 WTDAT
../kernel/os_port/os_cpu_a.asm:270    *ABS*:01d30008 WTCNT
../kernel/os_port/os_cpu_a.asm:273    *ABS*:01d60000 IICCON
../kernel/os_port/os_cpu_a.asm:274    *ABS*:01d60004 IICSTAT
../kernel/os_port/os_cpu_a.asm:275    *ABS*:01d60008 IICADD
../kernel/os_port/os_cpu_a.asm:276    *ABS*:01d6000c IICDS
../kernel/os_port/os_cpu_a.asm:279    *ABS*:01d18000 IISCON
../kernel/os_port/os_cpu_a.asm:280    *ABS*:01d18004 IISMOD
../kernel/os_port/os_cpu_a.asm:281    *ABS*:01d18008 IISPSR
../kernel/os_port/os_cpu_a.asm:282    *ABS*:01d1800c IISFCON
../kernel/os_port/os_cpu_a.asm:283    *ABS*:01d18010 IISFIF
../kernel/os_port/os_cpu_a.asm:286    *ABS*:01d14000 SIOCON
../kernel/os_port/os_cpu_a.asm:287    *ABS*:01d14004 SIODAT
../kernel/os_port/os_cpu_a.asm:288    *ABS*:01d14008 SBRDR
../kernel/os_port/os_cpu_a.asm:289    *ABS*:01d1400c IVTCNT
../kernel/os_port/os_cpu_a.asm:290    *ABS*:01d14010 DCNTZ
../kernel/os_port/os_cpu_a.asm:312    *ABS*:00000000 ROM_START_ADDRESS
../kernel/os_port/os_cpu_a.asm:313    *ABS*:001fffff ROM_END_ADDRESS
../kernel/os_port/os_cpu_a.asm:315    *ABS*:01c00000 DEVICES_START
../kernel/os_port/os_cpu_a.asm:316    *ABS*:0bffffff DEVICES_END
../kernel/os_port/os_cpu_a.asm:318    *ABS*:0c000000 RAM_START_ADDRESS
../kernel/os_port/os_cpu_a.asm:319    *ABS*:0c7fffff RAM_END_ADDRESS
../kernel/os_port/os_cpu_a.asm:321    *ABS*:10000000 SP_START_ADDRESS
../kernel/os_port/os_cpu_a.asm:322    *ABS*:100001ff SP_END_ADDRESS
../kernel/os_port/os_cpu_a.asm:324    *ABS*:10004000 CACHE_LRU_START
../kernel/os_port/os_cpu_a.asm:325    *ABS*:100047ff CACHE_LRU_END
../kernel/os_port/os_cpu_a.asm:329    *ABS*:0c7ff000 USRSTACK
../kernel/os_port/os_cpu_a.asm:330    *ABS*:0c7ff100 SVCSTACK
../kernel/os_port/os_cpu_a.asm:331    *ABS*:0c7ff200 UNDSTACK
../kernel/os_port/os_cpu_a.asm:332    *ABS*:0c7ff300 ABTSTACK
../kernel/os_port/os_cpu_a.asm:333    *ABS*:0c7ff400 IRQSTACK
../kernel/os_port/os_cpu_a.asm:334    *ABS*:0c7ff500 FIQSTACK
../kernel/os_port/os_cpu_a.asm:338    *ABS*:0c7fff00 pISR_RESET
../kernel/os_port/os_cpu_a.asm:339    *ABS*:0c7fff04 pISR_UNDEF
../kernel/os_port/os_cpu_a.asm:340    *ABS*:0c7fff08 pISR_SWI
../kernel/os_port/os_cpu_a.asm:341    *ABS*:0c7fff0c pISR_PABORT
../kernel/os_port/os_cpu_a.asm:342    *ABS*:0c7fff10 pISR_DABORT
../kernel/os_port/os_cpu_a.asm:344    *ABS*:0c7fff18 pISR_IRQ
../kernel/os_port/os_cpu_a.asm:345    *ABS*:0c7fff1c pISR_FIQ
../kernel/os_port/os_cpu_a.asm:346    *ABS*:0c7fff20 pISR_ADC
../kernel/os_port/os_cpu_a.asm:347    *ABS*:0c7fff24 pISR_RTC
../kernel/os_port/os_cpu_a.asm:348    *ABS*:0c7fff28 pISR_UTXD1
../kernel/os_port/os_cpu_a.asm:349    *ABS*:0c7fff2c pISR_UTXD0
../kernel/os_port/os_cpu_a.asm:350    *ABS*:0c7fff30 pISR_SIO
../kernel/os_port/os_cpu_a.asm:351    *ABS*:0c7fff34 pISR_IIC
../kernel/os_port/os_cpu_a.asm:352    *ABS*:0c7fff38 pISR_URXD1
../kernel/os_port/os_cpu_a.asm:353    *ABS*:0c7fff3c pISR_URXD0
../kernel/os_port/os_cpu_a.asm:354    *ABS*:0c7fff40 pISR_TIMER5
../kernel/os_port/os_cpu_a.asm:355    *ABS*:0c7fff44 pISR_TIMER4
../kernel/os_port/os_cpu_a.asm:356    *ABS*:0c7fff48 pISR_TIMER3
../kernel/os_port/os_cpu_a.asm:357    *ABS*:0c7fff4c pISR_TIMER2
../kernel/os_port/os_cpu_a.asm:358    *ABS*:0c7fff50 pISR_TIMER1
../kernel/os_port/os_cpu_a.asm:359    *ABS*:0c7fff54 pISR_TIMER0
../kernel/os_port/os_cpu_a.asm:360    *ABS*:0c7fff58 pISR_UERR01
../kernel/os_port/os_cpu_a.asm:361    *ABS*:0c7fff5c pISR_WDT
../kernel/os_port/os_cpu_a.asm:362    *ABS*:0c7fff60 pISR_BDMA1
../kernel/os_port/os_cpu_a.asm:363    *ABS*:0c7fff64 pISR_BDMA0
../kernel/os_port/os_cpu_a.asm:364    *ABS*:0c7fff68 pISR_ZDMA1
../kernel/os_port/os_cpu_a.asm:365    *ABS*:0c7fff6c pISR_ZDMA0
../kernel/os_port/os_cpu_a.asm:366    *ABS*:0c7fff70 pISR_TICK
../kernel/os_port/os_cpu_a.asm:367    *ABS*:0c7fff74 pISR_PB
../kernel/os_port/os_cpu_a.asm:368    *ABS*:0c7fff78 pISR_ETHERNET
../kernel/os_port/os_cpu_a.asm:369    *ABS*:0c7fff7c pISR_TS
../kernel/os_port/os_cpu_a.asm:370    *ABS*:0c7fff80 pISR_KEYPAD
../kernel/os_port/os_cpu_a.asm:371    *ABS*:0c7fff84 pISR_USB
../kernel/os_port/os_cpu_a.asm:374    *ABS*:00200000 BIT_PB
../kernel/os_port/os_cpu_a.asm:375    *ABS*:00400000 BIT_ETHERNET
../kernel/os_port/os_cpu_a.asm:376    *ABS*:00800000 BIT_TS
../kernel/os_port/os_cpu_a.asm:377    *ABS*:01000000 BIT_KEYPAD
../kernel/os_port/os_cpu_a.asm:378    *ABS*:02000000 BIT_USB
../kernel/os_port/os_cpu_a.asm:381    *ABS*:00000008 BIT_RIGHTPB
../kernel/os_port/os_cpu_a.asm:382    *ABS*:00000004 BIT_LEFTPB
../kernel/os_port/os_cpu_a.asm:383    *ABS*:00000002 BIT_IDE_INTRQ
../kernel/os_port/os_cpu_a.asm:384    *ABS*:00000001 BIT_IDE_DMACK
../kernel/os_port/os_cpu_a.asm:426    .text:00000000 OSStartHighRdy
../kernel/os_port/os_cpu_a.asm:456    .text:00000028 OSCtxSw
../kernel/os_port/os_cpu_a.asm:467    .text:00000044 OSIntCtxSw
../kernel/os_port/os_cpu_a.asm:498    .text:00000078 OSTickISR
../kernel/os_port/os_cpu_a.asm:409    *ABS*:00000012 IRQMODE
../kernel/os_port/os_cpu_a.asm:410    *ABS*:00000013 SVCMODE
../kernel/os_port/os_cpu_a.asm:414    *ABS*:000000c0 NOINT
../kernel/os_port/os_cpu_a.asm:428    .text:00000000 $a
../kernel/os_port/os_cpu_a.asm:528    .text:000000cc OSTickISRcont
../kernel/os_port/os_cpu_a.asm:547    .text:000000f4 $d
                   .debug_aranges:0000000c $d

UNDEFINED SYMBOLS
OSTaskSwHook
OSRunning
OSTCBHighRdy
OSTCBCur
OSPrioHighRdy
OSPrioCur
OSIntEnter
OSIntNesting
OSTimeTick
OSIntExit
